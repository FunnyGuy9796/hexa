org 0xffcf:0x000f

start:
    mov R0, #0x0
    mov R1, #0x0
    mov R2, #0x0
    mov R3, #0x0
    mov R4, #0x0
    mov R5, #0x0
    mov R6, #0x0
    mov R7, #0x0
    mov SP, #0xffff
    mov SS, #0x0f
    mov DS, #0x0
    mov FLAGS, #0x0

    st #0x011c, #0x1

    call print_boot

    mov SP, #0x0
    mov SS, #0x0

    st #0x0050, #0x03
    st #0x0051, #0x00
    st #0x0052, #0xea
    st #0x0053, #0xff

    mov CS, #0x0

    jmp #0x011e

    hlt

print_boot:
    mov R0, #0x011a

    st R0, #0x62
    st R0, #0x6f
    st R0, #0x6f
    st R0, #0x74
    st R0, #0x69
    st R0, #0x6e
    st R0, #0x67
    st R0, #0x20
    st R0, #0x66
    st R0, #0x72
    st R0, #0x6f
    st R0, #0x6d
    st R0, #0x20
    st R0, #0x64
    st R0, #0x69
    st R0, #0x73
    st R0, #0x6b
    st R0, #0x2e
    st R0, #0x2e
    st R0, #0x2e
    st R0, #0x0a

    mov R0, #0x0

    ret

print_serial:
    mov R0, #0x011a

    st R0, R7

    mov R0, #0x0

    iret

db 0x88
db 0xcc